components:
  schemas:
    data:
      properties:
        data:
          items:
            $ref: '#/components/schemas/UserResponse'
          type: array
      type: object
    AddUserBody:
      properties:
        events:
          example: All
          type: string
        name:
          example: John Doe
          type: string
        webhook:
          example: https://example.com/webhook
          type: string
      type: object
    AudioBody:
      properties:
        audio:
          example: data:audio/mp3;base64,...
          type: string
        chatId:
          example: 123456789
          type: integer
        fileName:
          example: audio.mp3
          type: string
        notify:
          example: true
          type: boolean
        phone:
          example: "79001234567"
          type: string
      type: object
    AuthConfirmBody:
      properties:
        code:
          example: "123456"
          type: string
      type: object
    AuthRegisterBody:
      properties:
        firstName:
          example: John
          type: string
        lastName:
          example: Doe
          type: string
      type: object
    AuthRequestBody:
      properties:
        language:
          example: ru
          type: string
        phone:
          example: "79001234567"
          type: string
      type: object
    ChatHistoryBody:
      properties:
        chatId:
          example: 123456789
          type: integer
        count:
          example: 50
          type: integer
        fromTime:
          example: 0
          type: integer
      type: object
    CheckUserBody:
      properties:
        phone:
          items:
            type: string
          type: array
          uniqueItems: false
      type: object
    ConnectBody:
      properties:
        immediate:
          example: false
          type: boolean
        subscribe:
          example:
          - Message
          - ReadReceipt
          items:
            type: string
          type: array
          uniqueItems: false
      type: object
    CreateGroupBody:
      properties:
        name:
          example: My Group
          type: string
        participants:
          items:
            type: integer
          type: array
          uniqueItems: false
      type: object
    DeleteMessageBody:
      properties:
        chatId:
          example: 123456789
          type: integer
        forMe:
          example: false
          type: boolean
        messageIds:
          items:
            type: integer
          type: array
          uniqueItems: false
      type: object
    DocumentBody:
      properties:
        caption:
          example: Document caption
          type: string
        chatId:
          example: 123456789
          type: integer
        document:
          example: data:application/pdf;base64,...
          type: string
        fileName:
          example: document.pdf
          type: string
        notify:
          example: true
          type: boolean
        phone:
          example: "79001234567"
          type: string
      type: object
    DownloadBody:
      properties:
        url:
          example: https://example.com/image.jpg
          type: string
      type: object
    DownloadFileBody:
      properties:
        chatId:
          example: 123456789
          type: integer
        fileId:
          example: 111222333
          type: integer
        messageId:
          example: 987654321
          type: integer
        videoId:
          example: 111222333
          type: integer
      type: object
    EditMessageBody:
      properties:
        chatId:
          example: 123456789
          type: integer
        messageId:
          example: 987654321
          type: integer
        text:
          example: Updated message
          type: string
      type: object
    EditUserBody:
      properties:
        events:
          example: All
          type: string
        name:
          example: John Doe
          type: string
        webhook:
          example: https://example.com/webhook
          type: string
      type: object
    GroupInfoBody:
      properties:
        chatId:
          example: 123456789
          type: integer
      type: object
    GroupJoinBody:
      properties:
        link:
          example: https://max.ru/join/abc123
          type: string
      type: object
    GroupNameBody:
      properties:
        chatId:
          example: 123456789
          type: integer
        name:
          example: New Group Name
          type: string
      type: object
    GroupTopicBody:
      properties:
        chatId:
          example: 123456789
          type: integer
        topic:
          example: Group description
          type: string
      type: object
    ImageBody:
      properties:
        caption:
          example: Image caption
          type: string
        chatId:
          example: 123456789
          type: integer
        image:
          example: data:image/jpeg;base64,...
          type: string
        notify:
          example: true
          type: boolean
        phone:
          example: "79001234567"
          type: string
      type: object
    MarkReadBody:
      properties:
        chatId:
          example: 123456789
          type: integer
        messageId:
          example: 987654321
          type: integer
      type: object
    MessageBody:
      properties:
        chatId:
          example: 123456789
          type: integer
        notify:
          example: true
          type: boolean
        phone:
          example: "79001234567"
          type: string
        replyTo:
          example: 0
          type: integer
        text:
          example: Hello, World!
          type: string
      type: object
    PresenceBody:
      properties:
        chatId:
          example: 123456789
          type: integer
      type: object
    ReactBody:
      properties:
        chatId:
          example: 123456789
          type: integer
        messageId:
          example: "987654321"
          type: string
        reaction:
          example: "\U0001F44D"
          type: string
      type: object
    Response:
      allOf:
      - $ref: '#/components/schemas/data'
      description: Standard API response format
      properties:
        code:
          example: 200
          type: integer
        data:
          type: object
        error:
          type: string
        success:
          example: true
          type: boolean
      type: object
    UpdateParticipantsBody:
      properties:
        chatId:
          example: 123456789
          type: integer
        operation:
          enum:
          - add
          - remove
          example: add
          type: string
        userIds:
          items:
            type: integer
          type: array
          uniqueItems: false
      type: object
    UserInfoBody:
      properties:
        userId:
          example: 123456789
          type: integer
      type: object
    UserResponse:
      properties:
        authenticated:
          example: true
          type: boolean
        connected:
          example: 1
          type: integer
        events:
          example: All
          type: string
        id:
          example: a7e5dd6b-8b3e-4035-ba87-3f96a0e3f5c0
          type: string
        maxUserId:
          example: 123456789
          type: integer
        name:
          example: John Doe
          type: string
        token:
          example: abc123def456
          type: string
        webhook:
          example: https://example.com/webhook
          type: string
      type: object
    VideoBody:
      properties:
        caption:
          example: Video caption
          type: string
        chatId:
          example: 123456789
          type: integer
        fileName:
          example: video.mp4
          type: string
        notify:
          example: true
          type: boolean
        phone:
          example: "79001234567"
          type: string
        video:
          example: data:video/mp4;base64,...
          type: string
      type: object
    WebhookBody:
      properties:
        webhook:
          example: https://example.com/webhook
          type: string
      type: object
  securitySchemes:
    AdminAuth:
      description: Admin token for admin endpoints
      in: header
      name: Authorization
      type: apiKey
    ApiKeyAuth:
      description: User token for authentication
      in: header
      name: token
      type: apiKey
externalDocs:
  description: ""
  url: ""
info:
  description: |-
    MaxAPI implements a multi-user and multi-device REST API for MAX Messenger.

    ## Authentication
    - **Standard Endpoints**: Include the `token` header with a valid user token
    - **Admin Endpoints**: Use the `Authorization` header with the admin token (set in .env as MAXAPI_ADMIN_TOKEN)

    ## Phone number format
    - Required: Country code (e.g. **79001234567** for Russia)
    - Do not prefix with a plus sign (+)
  title: MaxAPI
  version: 3.0.0
openapi: 3.1.0
paths:
  /admin/users:
    get:
      description: Returns a list of all users in the system
      responses:
        "200":
          content:
            application/json:
              schema:
                allOf:
                - $ref: '#/components/schemas/data'
                description: Standard API response format
                properties:
                  code:
                    example: 200
                    type: integer
                  data:
                    type: object
                  error:
                    type: string
                  success:
                    example: true
                    type: boolean
                type: object
          description: OK
        "500":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
          description: Internal Server Error
      security:
      - AdminAuth: []
      summary: List all users
      tags:
      - Admin
    post:
      description: Creates a new user in the system
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AddUserBody'
        description: User data
        required: true
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
          description: OK
        "400":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
          description: Bad Request
        "500":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
          description: Internal Server Error
      security:
      - AdminAuth: []
      summary: Create user
      tags:
      - Admin
  /admin/users/{userid}:
    delete:
      description: Deletes a user from the system
      parameters:
      - description: User ID
        in: path
        name: userid
        required: true
        schema:
          type: string
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
          description: OK
        "500":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
          description: Internal Server Error
      security:
      - AdminAuth: []
      summary: Delete user
      tags:
      - Admin
    put:
      description: Updates an existing user
      parameters:
      - description: User ID
        in: path
        name: userid
        required: true
        schema:
          type: string
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/EditUserBody'
        description: User data
        required: true
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
          description: OK
        "400":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
          description: Bad Request
        "500":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
          description: Internal Server Error
      security:
      - AdminAuth: []
      summary: Update user
      tags:
      - Admin
  /chat/delete:
    post:
      description: Deletes messages from a chat
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/DeleteMessageBody'
        description: Delete data
        required: true
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
          description: OK
        "400":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
          description: Bad Request
        "503":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
          description: Service Unavailable
      security:
      - ApiKeyAuth: []
      summary: Delete messages
      tags:
      - Chat
  /chat/downloadaudio:
    post:
      description: Downloads audio by file ID
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/DownloadFileBody'
        description: Audio info
        required: true
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
          description: OK
        "400":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
          description: Bad Request
        "503":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
          description: Service Unavailable
      security:
      - ApiKeyAuth: []
      summary: Download audio
      tags:
      - Chat
  /chat/downloaddocument:
    post:
      description: Downloads a document by file ID
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/DownloadFileBody'
        description: File info
        required: true
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
          description: OK
        "400":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
          description: Bad Request
        "503":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
          description: Service Unavailable
      security:
      - ApiKeyAuth: []
      summary: Download document
      tags:
      - Chat
  /chat/downloadimage:
    post:
      description: Downloads an image from URL
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/DownloadBody'
        description: URL
        required: true
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
          description: OK
        "400":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
          description: Bad Request
        "500":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
          description: Internal Server Error
      security:
      - ApiKeyAuth: []
      summary: Download image
      tags:
      - Chat
  /chat/downloadvideo:
    post:
      description: Downloads a video by video ID
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/DownloadFileBody'
        description: Video info
        required: true
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
          description: OK
        "400":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
          description: Bad Request
        "503":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
          description: Service Unavailable
      security:
      - ApiKeyAuth: []
      summary: Download video
      tags:
      - Chat
  /chat/history:
    post:
      description: Gets message history for a chat
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ChatHistoryBody'
        description: History parameters
        required: true
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
          description: OK
        "400":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
          description: Bad Request
        "503":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
          description: Service Unavailable
      security:
      - ApiKeyAuth: []
      summary: Get chat history
      tags:
      - Chat
  /chat/markread:
    post:
      description: Marks messages as read in a chat
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/MarkReadBody'
        description: Mark read data
        required: true
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
          description: OK
        "400":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
          description: Bad Request
        "503":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
          description: Service Unavailable
      security:
      - ApiKeyAuth: []
      summary: Mark messages as read
      tags:
      - Chat
  /chat/presence:
    post:
      description: Sends typing indicator to a chat
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PresenceBody'
        description: Chat ID
        required: true
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
          description: OK
        "400":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
          description: Bad Request
        "503":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
          description: Service Unavailable
      security:
      - ApiKeyAuth: []
      summary: Send presence
      tags:
      - User
  /chat/react:
    post:
      description: Adds or removes a reaction to a message
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ReactBody'
        description: Reaction data
        required: true
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
          description: OK
        "400":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
          description: Bad Request
        "503":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
          description: Service Unavailable
      security:
      - ApiKeyAuth: []
      summary: Add reaction
      tags:
      - Chat
  /chat/send/audio:
    post:
      description: Sends an audio file to a chat
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AudioBody'
        description: Audio data
        required: true
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
          description: OK
        "400":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
          description: Bad Request
        "503":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
          description: Service Unavailable
      security:
      - ApiKeyAuth: []
      summary: Send audio
      tags:
      - Chat
  /chat/send/document:
    post:
      description: Sends a document to a chat
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/DocumentBody'
        description: Document data
        required: true
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
          description: OK
        "400":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
          description: Bad Request
        "503":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
          description: Service Unavailable
      security:
      - ApiKeyAuth: []
      summary: Send document
      tags:
      - Chat
  /chat/send/edit:
    post:
      description: Edits an existing message
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/EditMessageBody'
        description: Edit data
        required: true
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
          description: OK
        "400":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
          description: Bad Request
        "503":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
          description: Service Unavailable
      security:
      - ApiKeyAuth: []
      summary: Edit message
      tags:
      - Chat
  /chat/send/image:
    post:
      description: Sends an image message to a chat
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ImageBody'
        description: Image data
        required: true
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
          description: OK
        "400":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
          description: Bad Request
        "503":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
          description: Service Unavailable
      security:
      - ApiKeyAuth: []
      summary: Send image
      tags:
      - Chat
  /chat/send/text:
    post:
      description: Sends a text message to a chat
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/MessageBody'
        description: Message data
        required: true
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
          description: OK
        "400":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
          description: Bad Request
        "503":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
          description: Not connected
      security:
      - ApiKeyAuth: []
      summary: Send text message
      tags:
      - Chat
  /chat/send/video:
    post:
      description: Sends a video to a chat
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/VideoBody'
        description: Video data
        required: true
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
          description: OK
        "400":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
          description: Bad Request
        "503":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
          description: Service Unavailable
      security:
      - ApiKeyAuth: []
      summary: Send video
      tags:
      - Chat
  /group/create:
    post:
      description: Creates a new group with specified participants
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateGroupBody'
        description: Group data
        required: true
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
          description: OK
        "400":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
          description: Bad Request
        "503":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
          description: Service Unavailable
      security:
      - ApiKeyAuth: []
      summary: Create group
      tags:
      - Group
  /group/info:
    post:
      description: Gets group information by chat ID
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/GroupInfoBody'
        description: Chat ID
        required: true
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
          description: OK
        "400":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
          description: Bad Request
        "404":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
          description: Not Found
        "503":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
          description: Service Unavailable
      security:
      - ApiKeyAuth: []
      summary: Get group info
      tags:
      - Group
  /group/invitelink:
    post:
      description: Gets invite link for a group
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/GroupInfoBody'
        description: Chat ID
        required: true
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
          description: OK
        "400":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
          description: Bad Request
        "404":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
          description: Not Found
        "503":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
          description: Service Unavailable
      security:
      - ApiKeyAuth: []
      summary: Get group invite link
      tags:
      - Group
  /group/join:
    post:
      description: Joins a group via invite link
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/GroupJoinBody'
        description: Invite link
        required: true
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
          description: OK
        "400":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
          description: Bad Request
        "503":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
          description: Service Unavailable
      security:
      - ApiKeyAuth: []
      summary: Join group
      tags:
      - Group
  /group/leave:
    post:
      description: Leaves a group
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/GroupInfoBody'
        description: Chat ID
        required: true
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
          description: OK
        "400":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
          description: Bad Request
        "503":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
          description: Service Unavailable
      security:
      - ApiKeyAuth: []
      summary: Leave group
      tags:
      - Group
  /group/list:
    get:
      description: Lists all groups and channels
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
          description: OK
        "503":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
          description: Service Unavailable
      security:
      - ApiKeyAuth: []
      summary: List groups
      tags:
      - Group
  /group/name:
    post:
      description: Sets the name of a group
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/GroupNameBody'
        description: Group name
        required: true
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
          description: OK
        "400":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
          description: Bad Request
        "503":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
          description: Service Unavailable
      security:
      - ApiKeyAuth: []
      summary: Set group name
      tags:
      - Group
  /group/topic:
    post:
      description: Sets the topic/description of a group
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/GroupTopicBody'
        description: Group topic
        required: true
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
          description: OK
        "400":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
          description: Bad Request
        "503":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
          description: Service Unavailable
      security:
      - ApiKeyAuth: []
      summary: Set group topic
      tags:
      - Group
  /group/updateparticipants:
    post:
      description: Adds or removes participants from a group
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateParticipantsBody'
        description: Participants data
        required: true
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
          description: OK
        "400":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
          description: Bad Request
        "503":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
          description: Service Unavailable
      security:
      - ApiKeyAuth: []
      summary: Update group participants
      tags:
      - Group
  /session/auth/confirm:
    post:
      description: Verifies the SMS code and returns auth token
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AuthConfirmBody'
        description: SMS code
        required: true
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
          description: OK
        "400":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
          description: Bad Request
      security:
      - ApiKeyAuth: []
      summary: Confirm SMS verification code
      tags:
      - Auth
  /session/auth/register:
    post:
      description: Registers a new user with first and last name
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AuthRegisterBody'
        description: User registration data
        required: true
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
          description: OK
        "400":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
          description: Bad Request
      security:
      - ApiKeyAuth: []
      summary: Register new user
      tags:
      - Auth
  /session/auth/request:
    post:
      description: Sends an SMS verification code to the specified phone number
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AuthRequestBody'
        description: Phone number and language
        required: true
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
          description: OK
        "400":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
          description: Bad Request
        "500":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
          description: Internal Server Error
      security:
      - ApiKeyAuth: []
      summary: Request SMS verification code
      tags:
      - Auth
  /session/connect:
    post:
      description: Initiates connection to MAX servers using saved auth token
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ConnectBody'
        description: Connection options
        required: true
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
          description: OK
        "400":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
          description: Bad Request
        "409":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
          description: Already connected
        "500":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
          description: Internal Server Error
      security:
      - ApiKeyAuth: []
      summary: Connect to MAX servers
      tags:
      - Session
  /session/disconnect:
    post:
      description: Closes connection to MAX servers
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
          description: OK
      security:
      - ApiKeyAuth: []
      summary: Disconnect from MAX servers
      tags:
      - Session
  /session/logout:
    post:
      description: Logs out from MAX and clears auth token
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
          description: OK
      security:
      - ApiKeyAuth: []
      summary: Logout from MAX
      tags:
      - Session
  /session/status:
    get:
      description: Returns connection and authentication status
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
          description: OK
      security:
      - ApiKeyAuth: []
      summary: Get connection status
      tags:
      - Session
  /user/avatar:
    post:
      description: Gets user avatar URL by MAX user ID
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UserInfoBody'
        description: User ID
        required: true
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
          description: OK
        "400":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
          description: Bad Request
        "404":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
          description: Not Found
        "503":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
          description: Service Unavailable
      security:
      - ApiKeyAuth: []
      summary: Get user avatar
      tags:
      - User
  /user/check:
    post:
      description: Checks if phone numbers exist in MAX
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CheckUserBody'
        description: Phone numbers
        required: true
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
          description: OK
        "400":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
          description: Bad Request
        "503":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
          description: Service Unavailable
      security:
      - ApiKeyAuth: []
      summary: Check user existence
      tags:
      - User
  /user/info:
    post:
      description: Gets user information by MAX user ID
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UserInfoBody'
        description: User ID
        required: true
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
          description: OK
        "400":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
          description: Bad Request
        "404":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
          description: Not Found
        "503":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
          description: Service Unavailable
      security:
      - ApiKeyAuth: []
      summary: Get user info
      tags:
      - User
  /webhook:
    delete:
      description: Removes the webhook URL
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
          description: OK
      security:
      - ApiKeyAuth: []
      summary: Delete webhook
      tags:
      - Webhook
    get:
      description: Returns current webhook URL
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
          description: OK
      security:
      - ApiKeyAuth: []
      summary: Get webhook
      tags:
      - Webhook
    post:
      description: Sets webhook URL for receiving events
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/WebhookBody'
        description: Webhook URL
        required: true
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
          description: OK
        "400":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
          description: Bad Request
      security:
      - ApiKeyAuth: []
      summary: Set webhook
      tags:
      - Webhook
    put:
      description: Updates webhook URL
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/WebhookBody'
        description: Webhook URL
        required: true
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
          description: OK
        "400":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
          description: Bad Request
      security:
      - ApiKeyAuth: []
      summary: Update webhook
      tags:
      - Webhook
servers:
- description: Local development server
  url: http://localhost:5555
